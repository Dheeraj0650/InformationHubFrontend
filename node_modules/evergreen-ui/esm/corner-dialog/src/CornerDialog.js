var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import { css } from 'ui-box';
import Transition from 'react-transition-group/Transition';
import { Pane } from '../../layers';
import { Portal } from '../../portal';
import { Heading } from '../../typography';
import { IconButton } from '../../buttons';

var animationEasing = {
  deceleration: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
  acceleration: 'cubic-bezier(0.4, 0.0, 1, 1)',
  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'
};

var ANIMATION_DURATION = 240;

var openAnimation = css.keyframes('openAnimation', {
  from: {
    transform: 'translateY(100%)'
  },
  to: {
    transform: 'translateY(0)'
  }
});

var closeAnimation = css.keyframes('closeAnimation', {
  from: {
    transform: 'scale(1)',
    opacity: 1
  },
  to: {
    transform: 'scale(0.9)',
    opacity: 0
  }
});

var animationStyles = {
  '&[data-state="entering"], &[data-state="entered"]': {
    animation: openAnimation + ' ' + ANIMATION_DURATION + 'ms ' + animationEasing.spring + ' both'
  },
  '&[data-state="exiting"]': {
    animation: closeAnimation + ' 120ms ' + animationEasing.acceleration + ' both'
  }
};

var CornerDialog = function (_PureComponent) {
  _inherits(CornerDialog, _PureComponent);

  function CornerDialog() {
    _classCallCheck(this, CornerDialog);

    var _this = _possibleConstructorReturn(this, (CornerDialog.__proto__ || Object.getPrototypeOf(CornerDialog)).call(this));

    _this.handleHidden = function () {
      _this.setState({ exiting: false });
      _this.props.onHide();

      if (_this.props.onExited) {
        var _this$props;

        (_this$props = _this.props).onExited.apply(_this$props, arguments);
      }
    };

    _this.handleClose = function () {
      _this.setState({ exiting: true });
      _this.props.onHide();
    };

    _this.state = {
      exiting: false
    };
    return _this;
  }

  _createClass(CornerDialog, [{
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          children = _props.children,
          width = _props.width,
          height = _props.height,
          hasCloseIcon = _props.hasCloseIcon,
          containerProps = _props.containerProps,
          isShown = _props.isShown,
          title = _props.title,
          onExit = _props.onExit,
          onExiting = _props.onExiting,
          onEnter = _props.onEnter,
          onEntering = _props.onEntering,
          onEntered = _props.onEntered;
      var exiting = this.state.exiting;


      return React.createElement(
        Portal,
        null,
        React.createElement(
          Transition,
          {
            appear: true,
            unmountOnExit: true,
            timeout: ANIMATION_DURATION,
            'in': isShown && !exiting,
            onExit: onExit,
            onExiting: onExiting,
            onExited: this.handleHidden,
            onEnter: onEnter,
            onEntering: onEntering,
            onEntered: onEntered
          },
          function (state) {
            return React.createElement(
              Pane,
              _extends({
                role: 'dialog',
                backgroundColor: 'white',
                elevation: 4,
                borderRadius: 8,
                width: width,
                height: height,
                css: animationStyles,
                'data-state': state,
                position: 'fixed',
                bottom: 8,
                right: 8
              }, containerProps),
              React.createElement(
                Pane,
                {
                  padding: 8,
                  borderBottom: 'extraMuted',
                  display: 'flex',
                  alignItems: 'center'
                },
                React.createElement(
                  Heading,
                  { is: 'h4', size: 500, flex: '1' },
                  title
                ),
                hasCloseIcon && React.createElement(IconButton, {
                  height: 24,
                  icon: 'close',
                  appearance: 'ghost',
                  onClick: _this2.handleClose
                })
              ),
              React.createElement(
                Pane,
                { overflowY: 'auto', 'data-state': state, padding: 8 },
                typeof children === 'function' ? children({
                  close: close
                }) : children
              )
            );
          }
        )
      );
    }
  }]);

  return CornerDialog;
}(PureComponent);

CornerDialog.propTypes = {
  title: PropTypes.node,
  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),
  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),
  isShown: PropTypes.bool,
  children: PropTypes.node,
  hasCloseIcon: PropTypes.bool,
  containerProps: PropTypes.object,

  onHide: PropTypes.func,
  onExit: PropTypes.func,
  onExiting: PropTypes.func,
  onExited: PropTypes.func,
  onEnter: PropTypes.func,
  onEntering: PropTypes.func,
  onEntered: PropTypes.func
};
CornerDialog.defaultProps = {
  onHide: function onHide() {},
  width: 320,
  height: 176,
  hasCloseIcon: true
};
export default CornerDialog;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JuZXItZGlhbG9nL3NyYy9Db3JuZXJEaWFsb2cuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJQdXJlQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwiY3NzIiwiVHJhbnNpdGlvbiIsIlBhbmUiLCJQb3J0YWwiLCJIZWFkaW5nIiwiSWNvbkJ1dHRvbiIsImFuaW1hdGlvbkVhc2luZyIsImRlY2VsZXJhdGlvbiIsImFjY2VsZXJhdGlvbiIsInNwcmluZyIsIkFOSU1BVElPTl9EVVJBVElPTiIsIm9wZW5BbmltYXRpb24iLCJrZXlmcmFtZXMiLCJmcm9tIiwidHJhbnNmb3JtIiwidG8iLCJjbG9zZUFuaW1hdGlvbiIsIm9wYWNpdHkiLCJhbmltYXRpb25TdHlsZXMiLCJhbmltYXRpb24iLCJDb3JuZXJEaWFsb2ciLCJoYW5kbGVIaWRkZW4iLCJzZXRTdGF0ZSIsImV4aXRpbmciLCJwcm9wcyIsIm9uSGlkZSIsIm9uRXhpdGVkIiwiaGFuZGxlQ2xvc2UiLCJzdGF0ZSIsImNoaWxkcmVuIiwid2lkdGgiLCJoZWlnaHQiLCJoYXNDbG9zZUljb24iLCJjb250YWluZXJQcm9wcyIsImlzU2hvd24iLCJ0aXRsZSIsIm9uRXhpdCIsIm9uRXhpdGluZyIsIm9uRW50ZXIiLCJvbkVudGVyaW5nIiwib25FbnRlcmVkIiwiY2xvc2UiLCJwcm9wVHlwZXMiLCJub2RlIiwib25lT2ZUeXBlIiwic3RyaW5nIiwibnVtYmVyIiwiYm9vbCIsIm9iamVjdCIsImZ1bmMiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxhQUFoQixRQUFxQyxPQUFyQztBQUNBLE9BQU9DLFNBQVAsTUFBc0IsWUFBdEI7QUFDQSxTQUFTQyxHQUFULFFBQW9CLFFBQXBCO0FBQ0EsT0FBT0MsVUFBUCxNQUF1QixtQ0FBdkI7QUFDQSxTQUFTQyxJQUFULFFBQXFCLGNBQXJCO0FBQ0EsU0FBU0MsTUFBVCxRQUF1QixjQUF2QjtBQUNBLFNBQVNDLE9BQVQsUUFBd0Isa0JBQXhCO0FBQ0EsU0FBU0MsVUFBVCxRQUEyQixlQUEzQjs7QUFFQSxJQUFNQyxrQkFBa0I7QUFDdEJDLGdEQURzQjtBQUV0QkMsOENBRnNCO0FBR3RCQztBQUhzQixDQUF4Qjs7QUFNQSxJQUFNQyxxQkFBcUIsR0FBM0I7O0FBRUEsSUFBTUMsZ0JBQWdCWCxJQUFJWSxTQUFKLENBQWMsZUFBZCxFQUErQjtBQUNuREMsUUFBTTtBQUNKQyxlQUFXO0FBRFAsR0FENkM7QUFJbkRDLE1BQUk7QUFDRkQsZUFBVztBQURUO0FBSitDLENBQS9CLENBQXRCOztBQVNBLElBQU1FLGlCQUFpQmhCLElBQUlZLFNBQUosQ0FBYyxnQkFBZCxFQUFnQztBQUNyREMsUUFBTTtBQUNKQyxlQUFXLFVBRFA7QUFFSkcsYUFBUztBQUZMLEdBRCtDO0FBS3JERixNQUFJO0FBQ0ZELGVBQVcsWUFEVDtBQUVGRyxhQUFTO0FBRlA7QUFMaUQsQ0FBaEMsQ0FBdkI7O0FBV0EsSUFBTUMsa0JBQWtCO0FBQ3RCLHVEQUFxRDtBQUNuREMsZUFBY1IsYUFBZCxTQUErQkQsa0JBQS9CLFdBQ0VKLGdCQUFnQkcsTUFEbEI7QUFEbUQsR0FEL0I7QUFNdEIsNkJBQTJCO0FBQ3pCVSxlQUFjSCxjQUFkLGVBQXNDVixnQkFBZ0JFLFlBQXREO0FBRHlCO0FBTkwsQ0FBeEI7O0lBV3FCWSxZOzs7QUEwQm5CLDBCQUFjO0FBQUE7O0FBQUE7O0FBQUEsVUFRZEMsWUFSYyxHQVFDLFlBQWE7QUFDMUIsWUFBS0MsUUFBTCxDQUFjLEVBQUVDLFNBQVMsS0FBWCxFQUFkO0FBQ0EsWUFBS0MsS0FBTCxDQUFXQyxNQUFYOztBQUVBLFVBQUksTUFBS0QsS0FBTCxDQUFXRSxRQUFmLEVBQXlCO0FBQUE7O0FBQ3ZCLDZCQUFLRixLQUFMLEVBQVdFLFFBQVg7QUFDRDtBQUNGLEtBZmE7O0FBQUEsVUFpQmRDLFdBakJjLEdBaUJBLFlBQU07QUFDbEIsWUFBS0wsUUFBTCxDQUFjLEVBQUVDLFNBQVMsSUFBWCxFQUFkO0FBQ0EsWUFBS0MsS0FBTCxDQUFXQyxNQUFYO0FBQ0QsS0FwQmE7O0FBR1osVUFBS0csS0FBTCxHQUFhO0FBQ1hMLGVBQVM7QUFERSxLQUFiO0FBSFk7QUFNYjs7Ozs2QkFnQlE7QUFBQTs7QUFBQSxtQkFjSCxLQUFLQyxLQWRGO0FBQUEsVUFFTEssUUFGSyxVQUVMQSxRQUZLO0FBQUEsVUFHTEMsS0FISyxVQUdMQSxLQUhLO0FBQUEsVUFJTEMsTUFKSyxVQUlMQSxNQUpLO0FBQUEsVUFLTEMsWUFMSyxVQUtMQSxZQUxLO0FBQUEsVUFNTEMsY0FOSyxVQU1MQSxjQU5LO0FBQUEsVUFPTEMsT0FQSyxVQU9MQSxPQVBLO0FBQUEsVUFRTEMsS0FSSyxVQVFMQSxLQVJLO0FBQUEsVUFTTEMsTUFUSyxVQVNMQSxNQVRLO0FBQUEsVUFVTEMsU0FWSyxVQVVMQSxTQVZLO0FBQUEsVUFXTEMsT0FYSyxVQVdMQSxPQVhLO0FBQUEsVUFZTEMsVUFaSyxVQVlMQSxVQVpLO0FBQUEsVUFhTEMsU0FiSyxVQWFMQSxTQWJLO0FBQUEsVUFnQkNqQixPQWhCRCxHQWdCYSxLQUFLSyxLQWhCbEIsQ0FnQkNMLE9BaEJEOzs7QUFrQlAsYUFDRTtBQUFDLGNBQUQ7QUFBQTtBQUNFO0FBQUMsb0JBQUQ7QUFBQTtBQUNFLHdCQURGO0FBRUUsK0JBRkY7QUFHRSxxQkFBU2Isa0JBSFg7QUFJRSxrQkFBSXdCLFdBQVcsQ0FBQ1gsT0FKbEI7QUFLRSxvQkFBUWEsTUFMVjtBQU1FLHVCQUFXQyxTQU5iO0FBT0Usc0JBQVUsS0FBS2hCLFlBUGpCO0FBUUUscUJBQVNpQixPQVJYO0FBU0Usd0JBQVlDLFVBVGQ7QUFVRSx1QkFBV0M7QUFWYjtBQVlHO0FBQUEsbUJBQ0M7QUFBQyxrQkFBRDtBQUFBO0FBQ0Usc0JBQUssUUFEUDtBQUVFLGlDQUFnQixPQUZsQjtBQUdFLDJCQUFXLENBSGI7QUFJRSw4QkFBYyxDQUpoQjtBQUtFLHVCQUFPVixLQUxUO0FBTUUsd0JBQVFDLE1BTlY7QUFPRSxxQkFBS2IsZUFQUDtBQVFFLDhCQUFZVSxLQVJkO0FBU0UsMEJBQVMsT0FUWDtBQVVFLHdCQUFRLENBVlY7QUFXRSx1QkFBTztBQVhULGlCQVlNSyxjQVpOO0FBY0U7QUFBQyxvQkFBRDtBQUFBO0FBQ0UsMkJBQVMsQ0FEWDtBQUVFLGdDQUFhLFlBRmY7QUFHRSwyQkFBUSxNQUhWO0FBSUUsOEJBQVc7QUFKYjtBQU1FO0FBQUMseUJBQUQ7QUFBQSxvQkFBUyxJQUFHLElBQVosRUFBaUIsTUFBTSxHQUF2QixFQUE0QixNQUFLLEdBQWpDO0FBQ0dFO0FBREgsaUJBTkY7QUFTR0gsZ0NBQ0Msb0JBQUMsVUFBRDtBQUNFLDBCQUFRLEVBRFY7QUFFRSx3QkFBSyxPQUZQO0FBR0UsOEJBQVcsT0FIYjtBQUlFLDJCQUFTLE9BQUtMO0FBSmhCO0FBVkosZUFkRjtBQWlDRTtBQUFDLG9CQUFEO0FBQUEsa0JBQU0sV0FBVSxNQUFoQixFQUF1QixjQUFZQyxLQUFuQyxFQUEwQyxTQUFTLENBQW5EO0FBQ0csdUJBQU9DLFFBQVAsS0FBb0IsVUFBcEIsR0FDR0EsU0FBUztBQUNQWTtBQURPLGlCQUFULENBREgsR0FJR1o7QUFMTjtBQWpDRixhQUREO0FBQUE7QUFaSDtBQURGLE9BREY7QUE0REQ7Ozs7RUE5SHVDL0IsYTs7QUFBckJzQixZLENBQ1pzQixTLEdBQVk7QUFDakJQLFNBQU9wQyxVQUFVNEMsSUFEQTtBQUVqQmIsU0FBTy9CLFVBQVU2QyxTQUFWLENBQW9CLENBQUM3QyxVQUFVOEMsTUFBWCxFQUFtQjlDLFVBQVUrQyxNQUE3QixDQUFwQixDQUZVO0FBR2pCZixVQUFRaEMsVUFBVTZDLFNBQVYsQ0FBb0IsQ0FBQzdDLFVBQVU4QyxNQUFYLEVBQW1COUMsVUFBVStDLE1BQTdCLENBQXBCLENBSFM7QUFJakJaLFdBQVNuQyxVQUFVZ0QsSUFKRjtBQUtqQmxCLFlBQVU5QixVQUFVNEMsSUFMSDtBQU1qQlgsZ0JBQWNqQyxVQUFVZ0QsSUFOUDtBQU9qQmQsa0JBQWdCbEMsVUFBVWlELE1BUFQ7O0FBU2pCdkIsVUFBUTFCLFVBQVVrRCxJQVREO0FBVWpCYixVQUFRckMsVUFBVWtELElBVkQ7QUFXakJaLGFBQVd0QyxVQUFVa0QsSUFYSjtBQVlqQnZCLFlBQVUzQixVQUFVa0QsSUFaSDtBQWFqQlgsV0FBU3ZDLFVBQVVrRCxJQWJGO0FBY2pCVixjQUFZeEMsVUFBVWtELElBZEw7QUFlakJULGFBQVd6QyxVQUFVa0Q7QUFmSixDO0FBREE3QixZLENBbUJaOEIsWSxHQUFlO0FBQ3BCekIsVUFBUSxrQkFBTSxDQUFFLENBREk7QUFFcEJLLFNBQU8sR0FGYTtBQUdwQkMsVUFBUSxHQUhZO0FBSXBCQyxnQkFBYztBQUpNLEM7ZUFuQkhaLFkiLCJmaWxlIjoiQ29ybmVyRGlhbG9nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCB7IGNzcyB9IGZyb20gJ3VpLWJveCdcbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJ3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvVHJhbnNpdGlvbidcbmltcG9ydCB7IFBhbmUgfSBmcm9tICcuLi8uLi9sYXllcnMnXG5pbXBvcnQgeyBQb3J0YWwgfSBmcm9tICcuLi8uLi9wb3J0YWwnXG5pbXBvcnQgeyBIZWFkaW5nIH0gZnJvbSAnLi4vLi4vdHlwb2dyYXBoeSdcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tICcuLi8uLi9idXR0b25zJ1xuXG5jb25zdCBhbmltYXRpb25FYXNpbmcgPSB7XG4gIGRlY2VsZXJhdGlvbjogYGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKWAsXG4gIGFjY2VsZXJhdGlvbjogYGN1YmljLWJlemllcigwLjQsIDAuMCwgMSwgMSlgLFxuICBzcHJpbmc6IGBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyMCwgMS4xNzUpYFxufVxuXG5jb25zdCBBTklNQVRJT05fRFVSQVRJT04gPSAyNDBcblxuY29uc3Qgb3BlbkFuaW1hdGlvbiA9IGNzcy5rZXlmcmFtZXMoJ29wZW5BbmltYXRpb24nLCB7XG4gIGZyb206IHtcbiAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDEwMCUpJ1xuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknXG4gIH1cbn0pXG5cbmNvbnN0IGNsb3NlQW5pbWF0aW9uID0gY3NzLmtleWZyYW1lcygnY2xvc2VBbmltYXRpb24nLCB7XG4gIGZyb206IHtcbiAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgb3BhY2l0eTogMVxuICB9LFxuICB0bzoge1xuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDAuOSknLFxuICAgIG9wYWNpdHk6IDBcbiAgfVxufSlcblxuY29uc3QgYW5pbWF0aW9uU3R5bGVzID0ge1xuICAnJltkYXRhLXN0YXRlPVwiZW50ZXJpbmdcIl0sICZbZGF0YS1zdGF0ZT1cImVudGVyZWRcIl0nOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtvcGVuQW5pbWF0aW9ufSAke0FOSU1BVElPTl9EVVJBVElPTn1tcyAke1xuICAgICAgYW5pbWF0aW9uRWFzaW5nLnNwcmluZ1xuICAgIH0gYm90aGBcbiAgfSxcbiAgJyZbZGF0YS1zdGF0ZT1cImV4aXRpbmdcIl0nOiB7XG4gICAgYW5pbWF0aW9uOiBgJHtjbG9zZUFuaW1hdGlvbn0gMTIwbXMgJHthbmltYXRpb25FYXNpbmcuYWNjZWxlcmF0aW9ufSBib3RoYFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvcm5lckRpYWxvZyBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHRpdGxlOiBQcm9wVHlwZXMubm9kZSxcbiAgICB3aWR0aDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuICAgIGhlaWdodDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuICAgIGlzU2hvd246IFByb3BUeXBlcy5ib29sLFxuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgICBoYXNDbG9zZUljb246IFByb3BUeXBlcy5ib29sLFxuICAgIGNvbnRhaW5lclByb3BzOiBQcm9wVHlwZXMub2JqZWN0LFxuXG4gICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkV4aXQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRXhpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25FeGl0ZWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRW50ZXJpbmc6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uRW50ZXJlZDogUHJvcFR5cGVzLmZ1bmNcbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgb25IaWRlOiAoKSA9PiB7fSxcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMTc2LFxuICAgIGhhc0Nsb3NlSWNvbjogdHJ1ZVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGV4aXRpbmc6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlSGlkZGVuID0gKC4uLmFyZ3MpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZXhpdGluZzogZmFsc2UgfSlcbiAgICB0aGlzLnByb3BzLm9uSGlkZSgpXG5cbiAgICBpZiAodGhpcy5wcm9wcy5vbkV4aXRlZCkge1xuICAgICAgdGhpcy5wcm9wcy5vbkV4aXRlZCguLi5hcmdzKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBleGl0aW5nOiB0cnVlIH0pXG4gICAgdGhpcy5wcm9wcy5vbkhpZGUoKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBoYXNDbG9zZUljb24sXG4gICAgICBjb250YWluZXJQcm9wcyxcbiAgICAgIGlzU2hvd24sXG4gICAgICB0aXRsZSxcbiAgICAgIG9uRXhpdCxcbiAgICAgIG9uRXhpdGluZyxcbiAgICAgIG9uRW50ZXIsXG4gICAgICBvbkVudGVyaW5nLFxuICAgICAgb25FbnRlcmVkXG4gICAgfSA9IHRoaXMucHJvcHNcblxuICAgIGNvbnN0IHsgZXhpdGluZyB9ID0gdGhpcy5zdGF0ZVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxQb3J0YWw+XG4gICAgICAgIDxUcmFuc2l0aW9uXG4gICAgICAgICAgYXBwZWFyXG4gICAgICAgICAgdW5tb3VudE9uRXhpdFxuICAgICAgICAgIHRpbWVvdXQ9e0FOSU1BVElPTl9EVVJBVElPTn1cbiAgICAgICAgICBpbj17aXNTaG93biAmJiAhZXhpdGluZ31cbiAgICAgICAgICBvbkV4aXQ9e29uRXhpdH1cbiAgICAgICAgICBvbkV4aXRpbmc9e29uRXhpdGluZ31cbiAgICAgICAgICBvbkV4aXRlZD17dGhpcy5oYW5kbGVIaWRkZW59XG4gICAgICAgICAgb25FbnRlcj17b25FbnRlcn1cbiAgICAgICAgICBvbkVudGVyaW5nPXtvbkVudGVyaW5nfVxuICAgICAgICAgIG9uRW50ZXJlZD17b25FbnRlcmVkfVxuICAgICAgICA+XG4gICAgICAgICAge3N0YXRlID0+IChcbiAgICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICAgIHJvbGU9XCJkaWFsb2dcIlxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiXG4gICAgICAgICAgICAgIGVsZXZhdGlvbj17NH1cbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzPXs4fVxuICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgICAgICBjc3M9e2FuaW1hdGlvblN0eWxlc31cbiAgICAgICAgICAgICAgZGF0YS1zdGF0ZT17c3RhdGV9XG4gICAgICAgICAgICAgIHBvc2l0aW9uPVwiZml4ZWRcIlxuICAgICAgICAgICAgICBib3R0b209ezh9XG4gICAgICAgICAgICAgIHJpZ2h0PXs4fVxuICAgICAgICAgICAgICB7Li4uY29udGFpbmVyUHJvcHN9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxQYW5lXG4gICAgICAgICAgICAgICAgcGFkZGluZz17OH1cbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b209XCJleHRyYU11dGVkXCJcbiAgICAgICAgICAgICAgICBkaXNwbGF5PVwiZmxleFwiXG4gICAgICAgICAgICAgICAgYWxpZ25JdGVtcz1cImNlbnRlclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SGVhZGluZyBpcz1cImg0XCIgc2l6ZT17NTAwfSBmbGV4PVwiMVwiPlxuICAgICAgICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgICAgICAgIDwvSGVhZGluZz5cbiAgICAgICAgICAgICAgICB7aGFzQ2xvc2VJY29uICYmIChcbiAgICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD17MjR9XG4gICAgICAgICAgICAgICAgICAgIGljb249XCJjbG9zZVwiXG4gICAgICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U9XCJnaG9zdFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xvc2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvUGFuZT5cblxuICAgICAgICAgICAgICA8UGFuZSBvdmVyZmxvd1k9XCJhdXRvXCIgZGF0YS1zdGF0ZT17c3RhdGV9IHBhZGRpbmc9ezh9PlxuICAgICAgICAgICAgICAgIHt0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgID8gY2hpbGRyZW4oe1xuICAgICAgICAgICAgICAgICAgICAgIGNsb3NlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICA6IGNoaWxkcmVufVxuICAgICAgICAgICAgICA8L1BhbmU+XG4gICAgICAgICAgICA8L1BhbmU+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9UcmFuc2l0aW9uPlxuICAgICAgPC9Qb3J0YWw+XG4gICAgKVxuICB9XG59XG4iXX0=